---
layout: post
author: ndifix
title: "非専門家が非専門家向けに書く非専門的なOSの話"
date: 2022-02-07 0:0:0
categories: Computer
---

## はじめに
きのこかたけのこか、AndroidかiPhoneか、ラティアスかラティオスか、WindowsかmacOSか　などなど
浮き世では絶えない争いごとの中には OS のことも含まれる昨今なのだから OS という言葉を聞いたこともある人も多いのだろうとは思いますが、
OSが何をしてくれているのか知りながら 「iPhoneしか勝たん」と言ってる人はそう多くないでしょうから、今回はそういう人に向けた落書き。
<!--more-->

## 複数を同時に
この文章を読みながら Spotify で音楽を聞くことができるのは OS のおかげです。OS は実行されるプログラムを管理します。\\
プログラムは基本、他のプログラムの様子を知ることができません。つまり、実行中のプログラムが「他のプログラムを気遣っていったん止める」ということはできません。自分が公園の遊具で遊んでいるときに他の子が来ても譲らないで自分の気が済むまで遊び続けるのが当たり前の世界。

文章を読みながら音楽を聴く場合、「文章を表示するプログラム」 と「音楽を再生するプログラム」が同時に動いているでしょう (おそらく)。
公園の遊具の例えに OS を登場させるとどうなるかというと、遊ぼうとする子供を管理します。どう管理するかというと、遊びたがっている子たちを1秒ごとに順番交代させることに対応すると思えばいいでしょうか。1秒というのは適当な時間で、実際にはもっと短くないと使い物にならないかもしれません。1秒間音楽が流れたと思ったら1秒間音楽が止まるようでは嫌でしょう。\\
このように OS の役割のうち複数のプログラムを少しずつ実行させるというものは *スケジューリング*　と呼ばれるものの一部です。

## プログラムを管理するということ
プログラムはメモリを使います。"プログラムがやりたいこと" だったり "どこまでやったか" だったりという情報は全てメモリに保存されていて、その情報をもとにプログラムが実行されます。ややこしいことにプログラムが占有するメモリの量は実行中に増えたり減ったりします。

ということは

> プログラムA 「もうちょっとメモリ使いたいからここ使おー」<br>
> プログラムB 「そこ俺のメモリなんだけど？？」

ということが起こり得ます。前の説明で OS はプログラムを管理すると書きました。ならプログラムが使うメモリもついでに管理してしまうのがよさそうです。その結果上の例はこうなるかもしれません。

> プログラムA 「もうちょっとメモリ使いたい」<br>
> OS 「じゃあここ空いてるから使ってね」<br>
> プログラムA 「使い終わったから返す」<br>
> プログラムB 「俺も使いたい」<br>
> OS 「ちょうどさっき空きができたからあげる」

管理方法については細かい話がいろいろありますが、メモリの使用状況を管理するのも OS の仕事です。

## この他いろいろ
プログラムとメモリが管理できるということは CPU と RAM が大体管理されているということです。他にも PC にはいろいろなパーツがあるのでそれらも管理できると尚良いでしょう。\\
例えば HDD, SSD といったストレージ、インターネットを使うために必要な NIC などがそうでしょう。

目的から逸れるので書けませんが hypervisor, GUI の提供など最新の商用 OS では当然のようにある機能もまだまだあります。

ですが、スマホで複数のアプリを起動しているときにふと「これは OS のおかげなのか」と思ってあげるだけでも影の立役者に光を当てることができるでしょう。
